generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Category {
  id                  String    @id @default(uuid())
  type                String    // "blog" or "video"
  slug                String    @unique
  title               String
  description         String
  menuDescription     String?
  accessibleLabel     String?
  icon                String?
  order               Int       @default(0)
  isActive            Boolean   @default(true)
  postCount           Int       @default(0)
  metaTitle           String
  metaDescription     String
  canonicalUrl        String
  robots              String?
  ogTitle             String
  ogDescription       String
  ogUrl               String
  ogType              String
  ogSiteName          String
  ogImages            Json
  twitterCard         String
  twitterSite         String
  twitterTitle        String
  twitterDescription  String
  twitterImages       Json
  schema              Json
  posts               Post[]    // Blog relation
  videos              Video[]   // Video relation
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
}

model Post {
  id            String    @id @default(uuid())
  title         String
  slug          String    @unique
  content       String
  excerpt       String?
  status        String    // "draft" or "published"
  categoryId    String
  category      Category  @relation(fields: [categoryId], references: [id])
  tags          Json      // e.g. ["news", "review"]
  featuredImage String?
  seoTitle      String
  seoDescription String
  author        String
  publishedAt   DateTime?
  readTime      String?
  views         Int       @default(0)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

model Video {
  id           String    @id @default(uuid())
  title        String
  slug         String    @unique
  description  String?
  coverImage   String?
  videoUrl     String?
  categoryId   String
  category     Category  @relation(fields: [categoryId], references: [id])
  isPublished  Boolean   @default(false)
  featured     Boolean   @default(false)
  author       String?
  publishedAt  DateTime?
  views        Int       @default(0)
  readTime     String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}